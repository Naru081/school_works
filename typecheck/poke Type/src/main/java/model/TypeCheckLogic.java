package model;

public class TypeCheckLogic {
    // タイプ相性表（ダメージ倍率を格納）
    private static final double[][] TYPE_CHART = {
    	// ノ  炎  水  電  草  氷  闘  毒  地  飛  超  虫  岩  霊  竜  悪  鋼  妖
        {1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  0.5, 0,  1,  1,  0.5, 1},  // ノーマル
        {1,  0.5, 0.5, 1,  2,  2,  1,  1,  1,  1,  1,  2,  0.5, 1,  0.5, 1,  2,  1},  // ほのお
        {1,  2,  0.5, 1,  0.5, 1,  1,  1,  2,  1,  1,  1,  2,  1,  0.5, 1,  1,  1},  // みず
        {1,  1,  2,  0.5, 0.5, 1,  1,  1,  0,  2,  1,  1,  1,  1,  0.5, 1,  1,  1},  // でんき
        {1,  0.5, 2,  1,  0.5, 1,  1, 0.5, 2,  0.5, 1, 0.5, 2,  1,  0.5, 1,  0.5, 1},  // くさ
        {1,  0.5, 0.5, 1,  2,  0.5, 1,  1, 2,  2,  1,  1, 1,  1,  2,  1,  0.5, 1},  // こおり
        {2,  1,  1,  1,  1,  2,  1,  0.5, 1,  0.5, 0.5, 0.5, 2,  0,  1,  2,  2,  0.5}, // かくとう
        {1,  1,  1,  1,  2,  1,  1,  0.5, 0.5, 1,  1,  1, 0.5, 0.5, 1,  1,  0,  2},  // どく
        {1,  2,  1,  2,  0.5, 1,  1,  2,  1,  0,  1, 0.5, 2,  1,  1,  1,  2,  1},  // じめん
        {1,  1,  1,  0.5,  2,  1,  2,  1,  1,  1,  1,  2,  0.5,  1,  1,  1,  0.5,  1},// ひこう
        {1,  1,  1,  1,  1,  1,  2,  2,  1,  1,  0.5,  1,  1,  1,  1,  0,  0.5,  1},// エスパー
        {1,  0.5,  1,  1,  2,  1,  0.5,  0.5,  1,  0.5,  2,  1,  0.5,  1,  2,  0.5,  0.5},// むし
        {1,  2,  1,  1,  1,  2,  0.5,  1,  0.5,  2,  1,  2,  1,  1,  1,  1,  0.5,  1},// いわ
        {0,  1,  1,  1,  1,  1,  1,  1,  1,  1,  2,  1,  1,  2,  1,  0.5,  1,  1},// ゴースト
        {1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  2,  1,  0.5,  0},// ドラゴン
        {1,  1,  1,  1,  1,  1,  0.5,  1,  1,  1,  2,  1,  1,  2,  1,  0.5,  0.5},// あく
        {1,  0.5,  0.5,  0.5,  1,  2,  1,  1,  1,  1,  1,  1,  2,  1,  1,  1,  0.5,  2},// はがね
        {1,  0.5,  1,  1,  1,  2,  0.5,  1,  1,  1,  1,  1,  1,  2,  2,  0.5,  1}// フェアリー
    };

    public void execute(Type type) {
        int you = type.getYou() - 1; // インデックス用に 0-based にする
        int opponent = type.getOpponent() - 1; // インデックス用に 0-based にする

        if (you < 0 || you >= TYPE_CHART.length || opponent < 0 || opponent >= TYPE_CHART.length) {
            type.setCheckResult("不明");
            return;
        }

        double effectiveness = TYPE_CHART[you][opponent];

        String checkResult;
        if (effectiveness == 2.0) {
            checkResult = "ばつぐん！";
        } else if (effectiveness == 0.5) {
            checkResult = "いまひとつ…";
        } else if (effectiveness == 0.0) {
            checkResult = "こうかがない…";
        } else {
            checkResult = "ふつう";
        }

        type.setCheckResult(checkResult);
    }
}
